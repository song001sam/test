<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.unissoft.test.mapper.mysql.CPKMapper">
    <resultMap id="BaseResultMap" type="com.unissoft.test.entity.CPKModel">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="pos" jdbcType="VARCHAR" property="pos"/>
        <result column="stl_grd_name" jdbcType="VARCHAR" property="stlGrdName"/>
        <result column="std_min" jdbcType="VARCHAR" property="stdMin"/>
        <result column="std_max" jdbcType="VARCHAR" property="stdMax"/>
        <result column="heat_id" jdbcType="VARCHAR" property="heatId"/>
        <result column="shift_id" jdbcType="VARCHAR" property="shiftId"/>
        <result column="fmatcode" jdbcType="VARCHAR" property="fmatCode"/>
        <result column="item_cd" jdbcType="VARCHAR" property="itemCd"/>
        <result column="ins_time" jdbcType="VARCHAR" property="insTime"/>
        <result column="cpk" jdbcType="VARCHAR" property="cpk"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id,pos,stl_grd_name,std_min,std_max,heat_id,
        shift_id,fmatcode,item_cd,ins_time,cpk
    </sql>
    <!--分页查询-->
    <select id="selectList" parameterType="com.unissoft.test.entity.CPKModel" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
        </where>
        group by pos,ins_time
    </select>

    <select id="showEchartsOneByTime" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select
        ins_time,round(avg(cpk),3) as avg
        from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
        </where>
        group by ins_time
    </select>

    <select id="showEchartsTwoByTime" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select
        pos,round(avg(cpk),3) as avg
        from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
            <if test="x != null and x != '' ">
                and ins_time = #{x}
            </if>

        </where>
        group by pos
    </select>

    <select id="showEchartsThreeByTime" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select
        item_cd,round(avg(cpk),3) as avg
        from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
            <if test="x != null and x != '' ">
                and ins_time = #{x}
            </if>
            <if test="y != null and y != '' ">
                and pos = #{y}
            </if>

        </where>
        group by item_cd
    </select>


    <select id="showEchartsOneByPos" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select
        pos,round(avg(cpk),3) as avg
        from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
        </where>
        group by pos
    </select>

    <select id="showEchartsTwoByPos" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select
        shift_id,round(avg(cpk),3) as avg
        from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
            <if test="x != null and x != '' ">
                and pos = #{x}
            </if>
            and shift_id != ''

        </where>
        group by shift_id
    </select>

    <select id="showEchartsThreeByPos" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select
        item_cd,round(avg(cpk),3) as avg
        from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
            <if test="x != null and x != '' ">
                and pos = #{x}
            </if>
            <if test="y != null and y != '' ">
                and shift_id = #{y}
            </if>
        </where>
        group by item_cd
    </select>

    <select id="showEchartsBZByPos" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select shift_id,pos,round(avg(cpk),3) avg from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
        </where>
        group by shift_id,pos
    </select>
    <select id="searchGroupByItem_cd" parameterType="com.unissoft.test.entity.CPKModel" resultType="Map">
        select stl_grd_name,item_cd from cpk_result
        <where>
            <if test="pos != null and pos != '' ">
                and pos = #{pos}
            </if>
            <if test="shiftId != null and shiftId != '' ">
                and shift_id = #{shiftId}
            </if>
            <if test="stlGrdName != null and stlGrdName != '' ">
                and stl_grd_name = #{stlGrdName}
            </if>
            <if test="itemCd != null and itemCd != '' ">
                and item_cd = #{itemCd}
            </if>
            <if test="beginTime != null and beginTime != '' ">
                and ins_time &gt;= #{beginTime}
            </if>
            <if test="endTime != null and endTime != '' ">
                and ins_time &lt;= #{endTime}
            </if>
        </where>
        group by stl_grd_name,item_cd
    </select>
</mapper>
